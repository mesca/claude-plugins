---
name: documentation
description: Generate and maintain project documentation using Material for MkDocs and mkdocstrings. Use when creating API references, writing Google-style docstrings, building documentation sites, or maintaining README and architecture docs.
user-invocable: false
---

# Documentation Skill

Generate and maintain comprehensive documentation using Material for MkDocs and mkdocstrings for auto-generated API references.

## When to Use This Skill

✅ **Use when:**
- Setting up documentation site with MkDocs
- Creating new features that need documentation
- Adding or updating docstrings
- Generating API documentation from code
- Writing user guides and tutorials
- Creating architecture documentation

❌ **Don't use when:**
- Writing inline code comments (not docstrings)
- Implementing features without public APIs
- Making internal refactoring changes
- Writing commit messages (use git-workflow skill)

## Documentation Stack

| Tool | Purpose |
|------|---------|
| Material for MkDocs | Documentation site theme |
| mkdocstrings | Auto-generate API docs from docstrings |
| mkdocs-gen-files | Generate pages programmatically |
| mkdocs-literate-nav | Navigation from markdown |
| mkdocs-section-index | Section index pages |

## Project Setup

### Directory Structure

```
${PROJECT_NAME}/
├── docs/
│   ├── index.md              # Homepage
│   ├── getting-started.md    # Quick start guide
│   ├── user-guide/           # User documentation
│   │   ├── installation.md
│   │   ├── configuration.md
│   │   └── usage.md
│   ├── reference/            # Auto-generated API docs
│   │   └── (generated by mkdocstrings)
│   ├── development/          # Developer docs
│   │   ├── contributing.md
│   │   └── architecture.md
│   └── scripts/
│       └── gen_ref_pages.py  # API docs generator script
├── mkdocs.yml                # MkDocs configuration
└── pyproject.toml
```

### pyproject.toml Configuration

```toml
[project]
name = "${PROJECT_NAME}"
# ... other config ...

[dependency-groups]
docs = [
    "mkdocs-material>=9.5",
    "mkdocstrings[python]>=0.27",
    "mkdocs-gen-files>=0.5",
    "mkdocs-literate-nav>=0.6",
    "mkdocs-section-index>=0.3",
]

[project.scripts]
docs = "${PROJECT_NAME}.scripts:docs_cli"

# Or use hatch scripts
[tool.hatch.envs.docs]
features = ["docs"]

[tool.hatch.envs.docs.scripts]
build = "mkdocs build --strict"
serve = "mkdocs serve"
deploy = "mkdocs gh-deploy --force"
```

### mkdocs.yml Configuration

```yaml
site_name: ${PROJECT_NAME}
site_description: Project description here
site_url: https://username.github.io/${PROJECT_NAME}
repo_url: https://github.com/username/${PROJECT_NAME}
repo_name: username/${PROJECT_NAME}

theme:
  name: material
  palette:
    - media: "(prefers-color-scheme: light)"
      scheme: default
      primary: indigo
      accent: indigo
      toggle:
        icon: material/brightness-7
        name: Switch to dark mode
    - media: "(prefers-color-scheme: dark)"
      scheme: slate
      primary: indigo
      accent: indigo
      toggle:
        icon: material/brightness-4
        name: Switch to light mode
  features:
    - content.code.copy
    - content.code.annotate
    - navigation.instant
    - navigation.instant.prefetch
    - navigation.tabs
    - navigation.sections
    - navigation.expand
    - navigation.top
    - search.highlight
    - search.suggest
    - toc.follow

plugins:
  - search
  - gen-files:
      scripts:
        - docs/scripts/gen_ref_pages.py
  - literate-nav:
      nav_file: SUMMARY.md
  - section-index
  - mkdocstrings:
      handlers:
        python:
          paths: [src]
          options:
            docstring_style: google
            docstring_options:
              ignore_init_summary: true
            merge_init_into_class: true
            show_root_heading: true
            show_root_full_path: false
            show_symbol_type_heading: true
            show_symbol_type_toc: true
            show_signature_annotations: true
            separate_signature: true
            signature_crossrefs: true
            summary: true
            show_source: true

markdown_extensions:
  - admonition
  - pymdownx.details
  - pymdownx.superfences
  - pymdownx.highlight:
      anchor_linenums: true
  - pymdownx.inlinehilite
  - pymdownx.snippets
  - pymdownx.tabbed:
      alternate_style: true
  - toc:
      permalink: true
  - attr_list
  - md_in_html

nav:
  - Home: index.md
  - Getting Started: getting-started.md
  - User Guide:
      - user-guide/index.md
      - Installation: user-guide/installation.md
      - Configuration: user-guide/configuration.md
      - Usage: user-guide/usage.md
  - API Reference: reference/
  - Development:
      - development/index.md
      - Contributing: development/contributing.md
      - Architecture: development/architecture.md
```

### API Reference Generator Script

Create `docs/scripts/gen_ref_pages.py`:

```python
"""Generate API reference pages for mkdocstrings."""

from pathlib import Path

import mkdocs_gen_files

nav = mkdocs_gen_files.Nav()

src = Path(__file__).parent.parent / "src"

for path in sorted(src.rglob("*.py")):
    module_path = path.relative_to(src).with_suffix("")
    doc_path = path.relative_to(src).with_suffix(".md")
    full_doc_path = Path("reference", doc_path)

    parts = tuple(module_path.parts)

    # Skip private modules and __main__
    if parts[-1].startswith("_") and parts[-1] != "__init__":
        continue

    # Handle __init__.py files
    if parts[-1] == "__init__":
        parts = parts[:-1]
        if not parts:
            continue
        doc_path = doc_path.with_name("index.md")
        full_doc_path = full_doc_path.with_name("index.md")

    nav[parts] = doc_path.as_posix()

    with mkdocs_gen_files.open(full_doc_path, "w") as fd:
        identifier = ".".join(parts)
        fd.write(f"::: {identifier}")

    mkdocs_gen_files.set_edit_path(full_doc_path, path.relative_to(src.parent))

with mkdocs_gen_files.open("reference/SUMMARY.md", "w") as nav_file:
    nav_file.writelines(nav.build_literate_nav())
```

## Documentation Commands

```bash
# Install docs dependencies
uv sync --group docs

# Serve locally with hot reload
uv run mkdocs serve

# Build static site
uv run mkdocs build --strict

# Deploy to GitHub Pages
uv run mkdocs gh-deploy --force

# Or using hatch
uv run hatch run docs:serve
uv run hatch run docs:build
uv run hatch run docs:deploy
```

## Writing Documentation

### Standards

1. **No emojis** - Keep professional
2. **Google-style docstrings** - For mkdocstrings compatibility
3. **Complete type hints** - Rendered in API docs
4. **Working examples** - Tested with doctest
5. **Cross-references** - Link to related APIs

### Google-Style Docstring Example

```python
def fetch_data(
    url: str,
    timeout: int = 30,
    headers: dict[str, str] | None = None,
) -> dict[str, Any]:
    """Fetch data from a URL and return parsed JSON.

    This function makes an HTTP GET request to the specified URL
    and parses the JSON response.

    Args:
        url: The URL to fetch data from. Must be a valid HTTP/HTTPS URL.
        timeout: Request timeout in seconds. Defaults to 30.
        headers: Optional HTTP headers to include in the request.

    Returns:
        Parsed JSON response as a dictionary.

    Raises:
        httpx.HTTPError: If the request fails or returns non-2xx status.
        ValueError: If the response is not valid JSON.

    Examples:
        Basic usage:

        >>> data = fetch_data("https://api.example.com/users")
        >>> print(data["count"])
        42

        With custom headers:

        >>> data = fetch_data(
        ...     "https://api.example.com/users",
        ...     headers={"Authorization": "Bearer token"},
        ... )

    See Also:
        [post_data][${PROJECT_NAME}.services.api.post_data]: For POST requests.
        [Configuration][${PROJECT_NAME}.core.config]: For default settings.
    """
    ...
```

### Admonitions in Markdown

```markdown
!!! note
    This is a note admonition.

!!! warning
    This is a warning admonition.

!!! example
    This is an example admonition.

!!! tip "Custom Title"
    This tip has a custom title.

??? info "Collapsible"
    This content is collapsed by default.
```

### Code Blocks with Annotations

````markdown
```python
def example():
    result = process()  # (1)!
    return result

1. This annotation explains the line
```
````

### Cross-References

```markdown
<!-- Link to API docs -->
See [`fetch_data`][${PROJECT_NAME}.services.api.fetch_data] for details.

<!-- Link to class -->
The [`Config`][${PROJECT_NAME}.core.config.Config] class handles settings.

<!-- Link to module -->
Check the [`services`][${PROJECT_NAME}.services] module.
```

## Documentation Types

### Homepage (index.md)

```markdown
# ${PROJECT_NAME}

Brief project description.

## Features

- Feature 1
- Feature 2

## Quick Start

\`\`\`bash
uv add ${PROJECT_NAME}
\`\`\`

\`\`\`python
from ${PROJECT_NAME} import main_function

result = main_function("input")
\`\`\`

## Documentation

- [Getting Started](getting-started.md) - Installation and first steps
- [User Guide](user-guide/index.md) - Detailed usage instructions
- [API Reference](reference/index.md) - Complete API documentation
```

### Module Docstrings

```python
"""Services for data processing.

This module provides the core business logic for processing data,
including validation, transformation, and persistence.

Example:
    >>> from ${PROJECT_NAME}.services import processor
    >>> result = processor.process("input.json")

Modules:
    processor: Main data processing logic.
    validator: Input validation utilities.
    transformer: Data transformation functions.
"""
```

## Quality Checklist

- [ ] All public APIs have Google-style docstrings
- [ ] Type hints complete and rendered correctly
- [ ] Examples are tested and working
- [ ] Cross-references resolve correctly
- [ ] Navigation structure is logical
- [ ] Search works for key terms
- [ ] Mobile-responsive layout
- [ ] No broken links (`mkdocs build --strict`)
- [ ] Admonitions used appropriately
- [ ] Code blocks have syntax highlighting

## Output Format

When completing documentation tasks, report:

1. Files created or modified
2. Documentation structure changes
3. API references generated/updated
4. Examples added and verified
5. Cross-references validated
6. Build status (`mkdocs build --strict` result)

## See Also

- **python** - Foundational Python conventions including docstring examples
- **code-quality** - Code structure and naming standards
- **logging** - Logging patterns to document
- **tdd** - Test documentation patterns
